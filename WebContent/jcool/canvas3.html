<!DOCTYPE html>
<html>
<script type="text/javascript" src="lib/lib.js"></script>
<script>
	if (window.File && window.FileReader && window.FileList && window.Blob) {
	} else {
		alert('The File APIs are not fully supported in this browser.');
	}
	
</script>
<style>
.imageViewer {
	float: left;
	border: 1px solid #aaa;
	text-align: center;
	padding: 10px;
	background: #f5f5f5;
}

.imageViewer input {
	margin-bottom: 10px;
}

.imageViewer canvas {
	
}

.container {
	width: 700px;
	height: 600px;
	float: left;
}

.vcanvas {
	background: #ddd;
	border: 1px solid #aaa;
	width: 150px;
	height: 150px;
}

.layoutright {
	float: left;
}
</style>
<body>
	<div class="container" id="drop_zone"></div>
	<div class="layoutright">
		<input type="file" id="inputbox" name="view1" onchange="readURL(this)"
			multiple="multiple" />
	</div>
</body>
<script>
	var maxImage = 20;
	var templateBuffer = '';
	var templateImageViewer = '<div class="imageViewer"><canvas id="view{{index}}" class="vcanvas" ></canvas></div>'		
	
	var dropZone = document.getElementById('drop_zone')
	function refreshImage(name, src) {
	var c = document.getElementById(name);
	var ctx = c.getContext("2d");
	var img = src;

	ctx.drawImage(img, 0, 0, ctx.canvas.width, ctx.canvas.height);
}
	for ( var i = 0; i < maxImage; i++) {
		templateBuffer += templateImageViewer.replace('{{index}}', i + 1);
	}
	dropZone.innerHTML = templateBuffer;
	
	
	function handleFileSelect(evt) {
		evt.stopPropagation();
		evt.preventDefault();

		var files = evt.dataTransfer.files; // FileList object.
		readSub(0, files[0]);
	}

	function handleDragOver(evt) {
		evt.stopPropagation();
		evt.preventDefault();
		evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
	}
	
	// Setup the dnd listeners. 
	dropZone.addEventListener('dragover', handleDragOver, false);
	dropZone.addEventListener('drop', handleFileSelect, false);
</script>
</html>

